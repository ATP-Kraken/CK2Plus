###########################
#
#	Plus crown laws
#
###########################

###########################
#
#	Law groups
#
###########################

law_groups = {
	kingdom_lockout_group = { #Kingdom Lockout - Plus
		# No law_type specified due to vanilla otherwise putting crown laws onto the wrong tab without Conclave
	}
}

de_jure_laws = {
	# Kingdom Lockout Laws
	kingdom_lockout_0 = { # None
		group = kingdom_lockout_group
		default = yes

		potential = {
			holder_scope = {
				tier = EMPEROR
				is_nomadic = no
				is_tribal = no
			}
		}

		allow = {
			has_law = kingdom_lockout_1
			holder_scope = {
				show_scope_change = no
				NOT = { trait = uncrowned }
			}
		}

		effect = {
			log = "kingdom_lockout_0 ([This.GetFullBaseName])"
			hidden_effect = {
				revoke_law = kingdom_lockout_1
				revoke_law = kingdom_lockout_2
			}
		}

		ai_will_do = {
			factor = 0
		}
	}

	kingdom_lockout_1 = { # Anyone
		group = kingdom_lockout_group

		potential = {
			holder_scope = {
				tier = EMPEROR
				is_nomadic = no
				is_tribal = no
			}
		}

		allow = {
			OR = {
				has_law = kingdom_lockout_0
				has_law = kingdom_lockout_2
			}

			trigger_if = {
				limit = { has_dlc = "Conclave" }

				OR = {
					has_law = ze_administration_laws_1
					has_law = ze_administration_laws_2
				}
			}
			trigger_else = {
				has_law = imperial_administration
			}

			trigger_if = {
				limit = { has_crown_law_title = yes }

				crownlaw_title = {
					OR = {
						has_law = crown_authority_1
						has_law = crown_authority_2
						has_law = crown_authority_3
						has_law = crown_authority_4
					}
				}
			}

			holder_scope = {
				show_scope_change = no

				NOT = { trait = uncrowned }

				prestige >= 1000
			}
		}

		pass_effect = {
			log = "kingdom_lockout_1 pass ([This.GetFullBaseName])"

			holder_scope = {
				if = {
					limit = { has_game_started = yes }

					prestige = -1000
				}
			}
		}

		effect = {
			log = "kingdom_lockout_1 ([This.GetFullBaseName])"
			hidden_effect = {
				revoke_law = kingdom_lockout_0
				revoke_law = kingdom_lockout_2
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_law = kingdom_lockout_2
			}
		}
	}

	kingdom_lockout_2 = { # Liege
		group = kingdom_lockout_group

		vassal_opinion = -5

		potential = {
			holder_scope = {
				tier = EMPEROR
				is_nomadic = no
				is_tribal = no
			}
		}

		allow = {
			has_law = kingdom_lockout_1

			OR = {
				government = theocratic_feudal_government
				government = chinese_imperial_government

				trigger_if = {
					limit = { has_dlc = "Conclave" }

					has_law = ze_administration_laws_2
				}
				trigger_else = {
					has_law = imperial_administration
				}
			}

			trigger_if = {
				limit = { has_crown_law_title = yes }

				crownlaw_title = {
					OR = {
						has_law = crown_authority_2
						has_law = crown_authority_3
						has_law = crown_authority_4
					}
				}
			}

			holder_scope = {
				show_scope_change = no

				NOT = { trait = uncrowned }
				prestige >= 2000
			}
		}

		pass_effect = {
			log = "kingdom_lockout_2 pass ([This.GetFullBaseName])"

			holder_scope = {
				show_scope_change = no

				if = {
					limit = { has_game_started = yes }

					prestige = -2000
				}
			}
		}

		effect = {
			log = "kingdom_lockout_2 ([This.GetFullBaseName])"

			hidden_effect = {
				revoke_law = kingdom_lockout_0
				revoke_law = kingdom_lockout_1
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
}