#	Example:
#
#	example_trigger = {
#		year = 1066
#		num_of_spouses = 2
#	}
#
#
#	In a script file:
#
#	trigger = {
#		exampel_trigger = yes
#	}
#
# Naming convention:  xxxx_trigger
#

faction_council_trigger = {
	trigger_if = {
		limit = { has_dlc = "Conclave" }
		OR = {
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = {
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = war_voting_power_1 } }
				}
			}
		}
	}
}

has_imperial_government_trigger = {
	is_feudal = yes

	trigger_if = {
		limit = { independent = yes }

		OR = {
			has_law = imperial_administration
			has_law = ze_administration_laws_2
		}
	}
	trigger_else = {
		any_liege = {
			has_imperial_government_trigger = yes
		}
	}
}

holy_order_not_expelled_trigger = {
	any_demesne_title = {
		trigger_if = {
			limit = { title = d_bektashi }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_bektashi
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_army_light }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_army_light
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_army_lucifer }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_army_lucifer
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_braedralag }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_braedralag
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_chosen_perkunas }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_chosen_perkunas
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_fianna }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_fianna
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_gwydion }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_gwydion
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_harii }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_harii
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_haruriyyah }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_haruriyyah
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_hashshashin }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_hashshashin
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_huitzilopochtli }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_huitzilopochtli
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_holy_sepulchre }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_holy_sepulchre
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_immortals }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_immortals
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_jomsvikings }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_jomsvikings
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_knights_calatrava }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_knights_calatrava
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_knights_hospitaler }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_knights_hospitaler
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_knights_saint_mark }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_knights_saint_mark
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_knights_santiago }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_knights_santiago
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_knights_templar }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_knights_templar
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_red_dragons }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_red_dragons
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_saint_addai }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_saint_addai
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_saint_anthony }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_saint_anthony
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_saint_blaise }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_saint_blaise
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_sky_lords }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_sky_lords
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_sons_kaleva }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_sons_kaleva
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_spirit_guardians }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_spirit_guardians
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_teutonic_order }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_teutonic_order
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_warriors_perun }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_warriors_perun
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_zealots }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_zealots
					}
				}
			}
		}
		trigger_else_if = {
			limit = { title = d_zun_warriors }
			ROOT = {
				NOT = {
					any_liege = {
						has_character_modifier = expelled_d_zun_warriors
					}
				}
			}
		}
		trigger_else = {
			OR = {
				title = d_anubis
				title = d_ashokas_chosen
				title = d_bulls_rishabha
				title = d_devotees_of_the_true_prophet
				title = d_disciples_of_the_old_gods
				title = d_followers_arjuna
				title = d_ghazi_shiite
				title = d_ghazi_sunni
				title = d_great_host
				title = d_guardians_of_the_sacred_flame
				title = d_herculean
				title = d_horus
				title = d_sacred_band
				title = d_sons_of_judea
			}
		}
	}
}

in_command_trigger = {
	trigger_if = {
		limit = {
			OR = {
				any_liege = { war = yes }
				war = yes
			}
		}

		in_command = yes
	}
}

# TODO: Simplify this
is_feminist_trigger = {
	OR = {
		culture = basque
		culture = zhangzhung
		culture = sumpa
		religion = cathar
		religion = bogomilist
		religion = messalian
		religion = egyptian_pagan
		religion = buddhist
		religion = mazdaki
		religion = tondrakian
		religion = druze
		religion = promethean_pagan
		religion = berber_pagan
		has_religion_feature = religion_equal
		#TODO: figure out whether we need to make an is_misandrist_trigger or something and put this there? We use this trigger in a lot of places and Matriarchal religions may not be best suited for all of them
		has_religion_feature = religion_matriarchal

		trigger_if = {
			limit = { is_ruler = yes }

			primary_title = { has_law = status_of_women_4 }
		}
		trigger_else = {
			liege = {
				primary_title = { has_law = status_of_women_4 }
			}
		}
	}
}

#used inside a claim scope to streamline "check for strong claim or usable weak?"
#ROOT is presumed to be the claimholder - possible to use PREVPREV instead?
is_usable_claim_trigger = {
	OR = {
		ROOT = { has_strong_claim = PREV }
		is_contested = yes # is already being contested in some form of Claim or Succession War
		is_pretender = yes # Checks vs ROOT character
		holder_scope = { has_regent = yes }

		trigger_if = {
			limit = { higher_tier_than = DUKE }

			holder_scope = { trait = uncrowned }
		}

		trigger_if = {
			limit = {
				OR = {
					title = k_navarra
					de_jure_liege_or_above = k_navarra
				}
			}

			is_female = yes
			culture = basque
		}

		trigger_if = {
			limit = { is_female = yes }

			succ_law_title = {
				NOR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
					has_law = true_cognatic_succession
				}
			}
		}
		trigger_else = {
			succ_law_title = {
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
			}
		}
	}
}

powerful_vassal_wants_council_trigger = {
	trigger_if = {
		limit = {
			liege = { real_tier = EMPEROR }
		}
		among_most_powerful_vassals = 5
	}
	trigger_else_if = {
		limit = {
			liege = { real_tier = KING }
		}
		among_most_powerful_vassals = 4
	}
	trigger_else = {
		among_most_powerful_vassals = 3
	}
}

religion_head_divorce_trigger = {
	OR = {
		religion = chalcedonian
		religion = catholic
		religion = fraticelli
		religion = orthodox
		religion = paulician
		religion = nestorian
		religion = monothelite
		religion = iconoclast
		religion = miaphysite
		religion = monophysite
		religion = zoroastrian
		religion = mazdaki
		religion = zurvanist
		religion = manichean
		religion = mandaean
		religion = jewish
		religion = samaritan
		religion = karaite
		religion = hindu
		religion = buddhist
		religion = jain
	}
}

same_sea_zone_province_trigger = {
	trigger_if = {
		limit = { region = custom_baltic_sea_zone }
		ROOT = { location = { region = custom_baltic_sea_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_north_sea_zone }
		ROOT = { location = { region = custom_north_sea_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_atlantic_zone }
		ROOT = { location = { region = custom_atlantic_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_west_med_zone }
		ROOT = { location = { region = custom_west_med_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_east_med_zone }
		ROOT = { location = { region = custom_east_med_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_black_sea_zone }
		ROOT = { location = { region = custom_black_sea_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_arctic_sea_zone }
		ROOT = { location = { region = custom_arctic_sea_zone } }
	}
	trigger_else_if = {
		limit = { region = custom_indian_sea_zone }
		ROOT = { location = { region = custom_indian_sea_zone } }
	}
	trigger_else = {
		always = no
	}
}

uses_imperial_decadence_trigger = {
	real_tier = EMPEROR
	is_tribal = no
	is_nomadic = no
	is_ironman = no
	NOT = { uses_decadence = yes }
}

regnal_name_culture_trigger = {
	trigger_if = {
		limit = { is_female = yes }
		OR = {
			culture = basque
			culture = portuguese
			culture = georgian
			culture = danish
			culture = greek
			culture = pontic_greek
			culture = norman
			culture = castillan
			culture = norwegian
		}
	}
	trigger_else = {
		OR = {
			culture = norse
			culture = swedish
			culture = norwegian
			culture = danish
			culture = icelandic
			culture = english_norse
			german_cultures_trigger = yes
			culture = polish
			culture = scottish
			culture = scots
			culture = english
			culture = saxon
			culture = bohemian
			culture = hungarian
			culture = croatian
			culture = serbian
			culture = bulgarian
			culture = romanian
			culture = frankish
			culture = norman
			culture = basque
			culture = castillan
			culture = catalan
			culture = old_frankish
			culture = greek
			culture = pontic_greek
			culture = russian
			is_italian_trigger = yes
			culture = portuguese
			culture = armenian
			culture = georgian
			culture = lithuanian
			culture = welsh
			culture = cornish
			culture = breton
			culture = persian
		}
	}
}

regnal_dynastic_name_trigger = {
	any_dynasty_member_even_if_dead = {
		NOT = { character = ROOT }
		same_sex = ROOT
		is_alive = no
		compare_cultures_ROOT_trigger = yes
		OR = {
			tier = ROOT
			higher_tier_than = ROOT
		}
	}
}

regnal_name_trigger = {
	OR = {
		regnal_name_culture_trigger = yes
		regnal_dynastic_name_trigger = yes
	}
}

major_vassal_is_foreign_trigger = {
	OR = {
		any_vassal = {
			relative_power_to_liege = 0.25
			NOR = {
				liege = { culture = PREV }
				de_jure_liege_or_above = PREV
			}
		}
		any_vassal = {
			relative_power_to_liege = 0.1
			NOR = {
				liege = { culture = PREV }
				de_jure_liege_or_above = PREV
			}
			count = 2
		}
	}
}

has_owners_secret_community = {
	OR = {
		AND = { has_province_modifier = secret_catholic_community owner = { true_religion = catholic } }
		AND = { has_province_modifier = secret_cathar_community owner = { true_religion = cathar } }
		AND = { has_province_modifier = secret_fraticelli_community owner = { true_religion = fraticelli } }
		AND = { has_province_modifier = secret_waldensian_community owner = { true_religion = waldensian } }
		AND = { has_province_modifier = secret_lollard_community owner = { true_religion = lollard } }
		AND = { has_province_modifier = secret_orthodox_community owner = { true_religion = orthodox } }
		AND = { has_province_modifier = secret_monophysite_community owner = { true_religion = monophysite } }
		AND = { has_province_modifier = secret_bogomilist_community owner = { true_religion = bogomilist } }
		AND = { has_province_modifier = secret_monothelite_community owner = { true_religion = monothelite } }
		AND = { has_province_modifier = secret_iconoclast_community owner = { true_religion = iconoclast } }
		AND = { has_province_modifier = secret_paulician_community owner = { true_religion = paulician } }
		AND = { has_province_modifier = secret_nestorian_community owner = { true_religion = nestorian } }
		AND = { has_province_modifier = secret_messalian_community owner = { true_religion = messalian } }
		AND = { has_province_modifier = secret_sunni_community owner = { true_religion = sunni } }
		AND = { has_province_modifier = secret_zikri_community owner = { true_religion = zikri } }
		AND = { has_province_modifier = secret_yazidi_community owner = { true_religion = yazidi } }
		AND = { has_province_modifier = secret_ibadi_community owner = { true_religion = ibadi } }
		AND = { has_province_modifier = secret_kharijite_community owner = { true_religion = kharijite} }
		AND = { has_province_modifier = secret_shiite_community owner = { true_religion = shiite } }
		AND = { has_province_modifier = secret_druze_community owner = { true_religion = druze } }
		AND = { has_province_modifier = secret_hurufi_community owner = { true_religion = hurufi } }
		AND = { has_province_modifier = secret_norse_pagan_community owner = { true_religion = norse_pagan } }
		AND = { has_province_modifier = secret_tengri_pagan_community owner = { true_religion = tengri_pagan } }
		AND = { has_province_modifier = secret_baltic_pagan_community owner = { true_religion = baltic_pagan } }
		AND = { has_province_modifier = secret_finnish_pagan_community owner = { true_religion = finnish_pagan } }
		AND = { has_province_modifier = secret_aztec_community owner = { true_religion = aztec } }
		AND = { has_province_modifier = secret_slavic_pagan_community owner = { true_religion = slavic_pagan } }
		AND = { has_province_modifier = secret_west_african_pagan_community owner = { true_religion = west_african_pagan } }
		AND = { has_province_modifier = secret_zun_pagan_community owner = { true_religion = zun_pagan } }
		AND = { has_province_modifier = secret_jewish_community owner = { true_religion = jewish } }
		AND = { has_province_modifier = secret_samaritan_community owner = { true_religion = samaritan } }
		AND = { has_province_modifier = secret_karaite_community owner = { true_religion = karaite } }
		AND = { has_province_modifier = secret_zoroastrian_community owner = { true_religion = zoroastrian} }
		AND = { has_province_modifier = secret_zurvanist_community owner = { true_religion = zurvanist } }
		AND = { has_province_modifier = secret_mazdaki_community owner = { true_religion = mazdaki } }
		AND = { has_province_modifier = secret_hindu_community owner = { true_religion = hindu } }
		AND = { has_province_modifier = secret_buddhist_community owner = { true_religion = buddhist } }
		AND = { has_province_modifier = secret_jain_community owner = { true_religion = jain } }
		AND = { has_province_modifier = secret_khurmazta_community owner = { true_religion = khurmazta } }
		AND = { has_province_modifier = secret_taoist_community owner = { true_religion = taoist } }
		AND = { has_province_modifier = secret_bon_community owner = { true_religion = bon } }
		AND = { has_province_modifier = secret_bon_community owner = { true_religion = bon_reformed } }
		AND = { has_province_modifier = secret_norse_pagan_reformed_community owner = { true_religion = norse_pagan_reformed } }
		AND = { has_province_modifier = secret_baltic_pagan_reformed_community owner = { true_religion = baltic_pagan_reformed } }
		AND = { has_province_modifier = secret_finnish_pagan_reformed_community owner = { true_religion = finnish_pagan_reformed } }
		AND = { has_province_modifier = secret_slavic_pagan_reformed_community owner = { true_religion = slavic_pagan_reformed } }
		AND = { has_province_modifier = secret_tengri_pagan_reformed_community owner = { true_religion = tengri_pagan_reformed } }
		AND = { has_province_modifier = secret_west_african_pagan_reformed_community owner = { true_religion = west_african_pagan_reformed } }
		AND = { has_province_modifier = secret_zun_pagan_reformed_community owner = { true_religion = zun_pagan_reformed } }
		AND = { has_province_modifier = secret_german_pagan_reformed_community owner = { true_religion = german_pagan_reformed } }
		AND = { has_province_modifier = secret_celtic_pagan_reformed_community owner = { true_religion = celtic_pagan_reformed } }
		AND = { has_province_modifier = secret_chalcedonian_community owner = { true_religion = chalcedonian } }
		AND = { has_province_modifier = secret_miaphysite_community owner = { true_religion = miaphysite } }
		AND = { has_province_modifier = secret_apostolic_community owner = { true_religion = apostolic } }
		AND = { has_province_modifier = secret_manichean_community owner = { true_religion = manichean } }
		AND = { has_province_modifier = secret_tondrakian_community owner = { true_religion = tondrakian } }
		AND = { has_province_modifier = secret_adoptionist_community owner = { true_religion = adoptionist } }
		AND = { has_province_modifier = secret_quranist_community owner = { true_religion = quranist } }
		AND = { has_province_modifier = secret_bektashi_community owner = { true_religion = bektashi } }
		AND = { has_province_modifier = secret_qarmatian_community owner = { true_religion = qarmatian } }
		AND = { has_province_modifier = secret_mandaean_community owner = { true_religion = mandaean } }
		AND = { has_province_modifier = secret_roman_pagan_community owner = { true_religion = roman_pagan } }
		AND = { has_province_modifier = secret_hellenic_pagan_community owner = { true_religion = hellenic_pagan } }
		AND = { has_province_modifier = secret_egyptian_pagan_community owner = { true_religion = egyptian_pagan } }
		AND = { has_province_modifier = secret_arabic_pagan_community owner = { true_religion = arabic_pagan } }
		AND = { has_province_modifier = secret_berber_pagan_community owner = { true_religion = berber_pagan } }
		AND = { has_province_modifier = secret_canaan_pagan_community owner = { true_religion = canaan_pagan } }
		AND = { has_province_modifier = secret_aten_pagan_community owner = { true_religion = aten_pagan } }
		AND = { has_province_modifier = secret_promethean_pagan_community owner = { true_religion = promethean_pagan } }
		AND = { has_province_modifier = secret_german_pagan_community owner = { true_religion = german_pagan } }
		AND = { has_province_modifier = secret_celtic_pagan_community owner = { true_religion = celtic_pagan } }
	}
}

has_roots_secret_community = {
	OR = {
		AND = { has_province_modifier = secret_catholic_community ROOT = { true_religion = catholic } }
		AND = { has_province_modifier = secret_cathar_community ROOT = { true_religion = cathar } }
		AND = { has_province_modifier = secret_fraticelli_community ROOT = { true_religion = fraticelli } }
		AND = { has_province_modifier = secret_waldensian_community ROOT = { true_religion = waldensian } }
		AND = { has_province_modifier = secret_lollard_community ROOT = { true_religion = lollard } }
		AND = { has_province_modifier = secret_orthodox_community ROOT = { true_religion = orthodox } }
		AND = { has_province_modifier = secret_monophysite_community ROOT = { true_religion = monophysite } }
		AND = { has_province_modifier = secret_bogomilist_community ROOT = { true_religion = bogomilist } }
		AND = { has_province_modifier = secret_monothelite_community ROOT = { true_religion = monothelite } }
		AND = { has_province_modifier = secret_iconoclast_community ROOT = { true_religion = iconoclast } }
		AND = { has_province_modifier = secret_paulician_community ROOT = { true_religion = paulician } }
		AND = { has_province_modifier = secret_nestorian_community ROOT = { true_religion = nestorian } }
		AND = { has_province_modifier = secret_messalian_community ROOT = { true_religion = messalian } }
		AND = { has_province_modifier = secret_sunni_community ROOT = { true_religion = sunni } }
		AND = { has_province_modifier = secret_zikri_community ROOT = { true_religion = zikri } }
		AND = { has_province_modifier = secret_yazidi_community ROOT = { true_religion = yazidi } }
		AND = { has_province_modifier = secret_ibadi_community ROOT = { true_religion = ibadi } }
		AND = { has_province_modifier = secret_kharijite_community ROOT = { true_religion = kharijite} }
		AND = { has_province_modifier = secret_shiite_community ROOT = { true_religion = shiite } }
		AND = { has_province_modifier = secret_druze_community ROOT = { true_religion = druze } }
		AND = { has_province_modifier = secret_hurufi_community ROOT = { true_religion = hurufi } }
		AND = { has_province_modifier = secret_norse_pagan_community ROOT = { true_religion = norse_pagan } }
		AND = { has_province_modifier = secret_tengri_pagan_community ROOT = { true_religion = tengri_pagan } }
		AND = { has_province_modifier = secret_baltic_pagan_community ROOT = { true_religion = baltic_pagan } }
		AND = { has_province_modifier = secret_finnish_pagan_community ROOT = { true_religion = finnish_pagan } }
		AND = { has_province_modifier = secret_aztec_community ROOT = { true_religion = aztec } }
		AND = { has_province_modifier = secret_slavic_pagan_community ROOT = { true_religion = slavic_pagan } }
		AND = { has_province_modifier = secret_west_african_pagan_community ROOT = { true_religion = west_african_pagan } }
		AND = { has_province_modifier = secret_zun_pagan_community ROOT = { true_religion = zun_pagan } }
		AND = { has_province_modifier = secret_jewish_community ROOT = { true_religion = jewish } }
		AND = { has_province_modifier = secret_samaritan_community ROOT = { true_religion = samaritan } }
		AND = { has_province_modifier = secret_karaite_community ROOT = { true_religion = karaite } }
		AND = { has_province_modifier = secret_zoroastrian_community ROOT = { true_religion = zoroastrian} }
		AND = { has_province_modifier = secret_zurvanist_community ROOT = { true_religion = zurvanist } }
		AND = { has_province_modifier = secret_mazdaki_community ROOT = { true_religion = mazdaki } }
		AND = { has_province_modifier = secret_hindu_community ROOT = { true_religion = hindu } }
		AND = { has_province_modifier = secret_buddhist_community ROOT = { true_religion = buddhist } }
		AND = { has_province_modifier = secret_jain_community ROOT = { true_religion = jain } }
		AND = { has_province_modifier = secret_khurmazta_community ROOT = { true_religion = khurmazta } }
		AND = { has_province_modifier = secret_taoist_community ROOT = { true_religion = taoist } }
		AND = { has_province_modifier = secret_bon_community ROOT = { true_religion = bon } }
		AND = { has_province_modifier = secret_bon_community ROOT = { true_religion = bon_reformed } }
		AND = { has_province_modifier = secret_norse_pagan_reformed_community ROOT = { true_religion = norse_pagan_reformed } }
		AND = { has_province_modifier = secret_baltic_pagan_reformed_community ROOT = { true_religion = baltic_pagan_reformed } }
		AND = { has_province_modifier = secret_finnish_pagan_reformed_community ROOT = { true_religion = finnish_pagan_reformed } }
		AND = { has_province_modifier = secret_slavic_pagan_reformed_community ROOT = { true_religion = slavic_pagan_reformed } }
		AND = { has_province_modifier = secret_tengri_pagan_reformed_community ROOT = { true_religion = tengri_pagan_reformed } }
		AND = { has_province_modifier = secret_west_african_pagan_reformed_community ROOT = { true_religion = west_african_pagan_reformed } }
		AND = { has_province_modifier = secret_zun_pagan_reformed_community ROOT = { true_religion = zun_pagan_reformed } }
		AND = { has_province_modifier = secret_german_pagan_reformed_community ROOT = { true_religion = german_pagan_reformed } }
		AND = { has_province_modifier = secret_celtic_pagan_reformed_community ROOT = { true_religion = celtic_pagan_reformed } }
		AND = { has_province_modifier = secret_chalcedonian_community ROOT = { true_religion = chalcedonian } }
		AND = { has_province_modifier = secret_miaphysite_community ROOT = { true_religion = miaphysite } }
		AND = { has_province_modifier = secret_apostolic_community ROOT = { true_religion = apostolic } }
		AND = { has_province_modifier = secret_manichean_community ROOT = { true_religion = manichean } }
		AND = { has_province_modifier = secret_tondrakian_community ROOT = { true_religion = tondrakian } }
		AND = { has_province_modifier = secret_adoptionist_community ROOT = { true_religion = adoptionist } }
		AND = { has_province_modifier = secret_quranist_community ROOT = { true_religion = quranist } }
		AND = { has_province_modifier = secret_bektashi_community ROOT = { true_religion = bektashi } }
		AND = { has_province_modifier = secret_qarmatian_community ROOT = { true_religion = qarmatian } }
		AND = { has_province_modifier = secret_mandaean_community ROOT = { true_religion = mandaean } }
		AND = { has_province_modifier = secret_roman_pagan_community ROOT = { true_religion = roman_pagan } }
		AND = { has_province_modifier = secret_hellenic_pagan_community ROOT = { true_religion = hellenic_pagan } }
		AND = { has_province_modifier = secret_egyptian_pagan_community ROOT = { true_religion = egyptian_pagan } }
		AND = { has_province_modifier = secret_arabic_pagan_community ROOT = { true_religion = arabic_pagan } }
		AND = { has_province_modifier = secret_berber_pagan_community ROOT = { true_religion = berber_pagan } }
		AND = { has_province_modifier = secret_canaan_pagan_community ROOT = { true_religion = canaan_pagan } }
		AND = { has_province_modifier = secret_aten_pagan_community ROOT = { true_religion = aten_pagan } }
		AND = { has_province_modifier = secret_promethean_pagan_community ROOT = { true_religion = promethean_pagan } }
		AND = { has_province_modifier = secret_german_pagan_community ROOT = { true_religion = german_pagan } }
		AND = { has_province_modifier = secret_celtic_pagan_community ROOT = { true_religion = celtic_pagan } }
	}
}

is_court_educator_trigger = {
	trigger_if = {
		limit = { has_dlc = "Conclave" }
		has_minor_title = title_teacher
	}
	trigger_else = {
		has_minor_title = title_court_educator
	}
}

is_offmap_trigger = {
	is_offmap_governor = yes
	is_offmap_ruler = yes
}

is_sea_trade_route_trigger = { # These are allowed to build Custom Houses
	OR = {
		trade_route = mediterranean_trade
		trade_route = atlantic_trade
		trade_route = baltic_sea
	}
}

is_land_trade_route_trigger = { # These are allowed to build Toll Booths and Roads
	OR = {
		trade_route = amber_road
		trade_route = salt_road
		trade_route = french_trade
		trade_route = iberian_trade
		trade_route = british_trade
		trade_route = grand_trunk_road
		trade_route = timbuktu_trade
		trade_route = rus_road
	}
}

is_caspian_port = {
	OR = { # Caspian sea provinces, counter-clockwise starting from Gilan in the South
		province_id = 666 # Gilan
		province_id = 662 # Alamut/Mazandaran
		province_id = 661 # Tabaristan
		province_id = 633 # Gurgan
		province_id = 631 # Dihistan
		province_id = 627 # Kyzyl Su
		province_id = 625 # Usturt
		province_id = 624 # Mangyshlak
		province_id = 621 # Emba
		province_id = 618 # Atyrau/Guryev
		province_id = 620 # Itil
		province_id = 604 # Kuma
		province_id = 675 # Semender
		province_id = 674 # Derbent
		province_id = 669 # Shemakha
		province_id = 668 # Shirvan
	}
}

has_enough_personality_traits_trigger = {
	trigger_if = {
		limit = { ai = yes }
		personality_traits = 6
	}
	trigger_else = {
		personality_traits = 8
	}
}

# requires event target capital_province set
is_capital_province = {
	province = event_target:capital_province
}

patrician_is_in_caspian = { # Check if a patrician's realm holds any of the Caspian ports
	FROM = {
		is_patrician = yes
		top_liege = {
			any_realm_province = {
				is_caspian_port = yes # Port check skipped as all is_caspian_port provinces are ports anyways
			}
		}
	}
}

patrician_is_outside_caspian = { # Check if a patrician's realm holds any non-Caspian ports
	FROM = {
		is_patrician = yes
		top_liege = {
			any_realm_province = {
				NOT = { is_caspian_port = yes } # Port check necessary as this isn't as exclusive as the opposite
				port = yes
			}
		}
	}
}

# TODO: Utilize this in CB files
has_gender_equal_game_rule_trigger = {
	OR = {
		has_game_rule = {
			name = gender
			value = plus
		}
		has_game_rule = {
			name = gender
			value = all
		}
	}
}

holding_is_at_peace = {
	FROMFROM = {
		show_scope_change = no
		NOR = {
			show_only_failed_conditions  = yes
			has_siege = yes
			is_occupied = yes
			has_holding_modifier = looted_modifier
			has_holding_modifier = recently_conquered
		}
	}
}

nomad_holding_is_at_peace = {
	capital_holding = {
		show_scope_change = no
		NOR = {
			has_siege = yes
			is_occupied = yes
			has_holding_modifier = looted_modifier
			has_holding_modifier = recently_conquered
		}
	}
}

trade_post_is_at_peace = {
	trade_post_owner = { # has_siege does not work in trade post scopes
		show_scope_change = no
		custom_tooltip = {
			text = no_hostile_armies_present_tt

			NOT = {
				any_current_enemy = {
					any_army = {
						location = {
							province = PREVPREVPREVPREV
						}
					}
				}
			}
		}
	}
}

fort_hospital_is_at_peace = {
	owner = {
		show_scope_change = no
		custom_tooltip = {
			text = no_hostile_armies_present_tt

			NOT = {
				any_current_enemy = {
					any_army = {
						location = {
							province = PREVPREVPREVPREV
						}
					}
				}
			}
		}
	}
}
