namespace = schismPlus

#######################################
#
# CK2Plus Schism Events
#
#######################################
#
# CATALOG
#
# 001 - 049: Schism and Prevention
# 050 - 059: The Pentarchy
# 060 - 069: Ecumenical Councils
# 070 - 079: Schism Lead Up
#
#######################################

#######################################
#
# 001 - 049: Schism and Prevention
#
#######################################
#
# INDEX
#
# 001: Pre-schism setup
# 002: Schism Prevented
# 003: Narrate Schism Prevented
# 004: Schism Occurs
# 005: Narrate Schism Occurs
#
#######################################

# 002: Schism Prevented (Setup)
character_event = {
	id = schismPlus.002

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_global_flag = schism_prevented }
	}

	immediate = {
		set_global_flag = schism_prevented

		# This is primarily for those firing the event via console
		if = {
			limit = {
				NOR = {
					has_global_flag = patriarch_supreme_is_greek
					has_global_flag = patriarch_supreme_is_latin
				}
			}
			if = {
				limit = { k_pentarch_rome = { holder_scope = { trait = greek_rites } } }
				set_global_flag = patriarch_supreme_is_greek
			}
			else = {
				set_global_flag = patriarch_supreme_is_latin
			}
		}

		# Greek Victory
		if = {
			limit = { has_global_flag = patriarch_supreme_is_greek }
			b_hagiasophia = { holder_scope = { save_event_target_as = chalcedon_patriarch } }
			create_character = {
				religion = catholic
				culture = roman
				dynasty = random
				female = no
				trait = zealous
				age = 40
			}
			new_character = { save_event_target_as = chalcedon_pope }
			orthodox = { save_event_target_as = victor_religion }
			catholic = { save_event_target_as = losing_religion }
		}
		# Catholic Victory
		else_if = {
			limit = { has_global_flag = patriarch_supreme_is_latin }
			k_pentarch_rome = { holder_scope = { save_event_target_as = chalcedon_pope } }
			create_character = {
				religion = orthodox
				culture = greek
				dynasty = random
				female = no
				trait = zealous
				age = 40
			}
			new_character = { save_event_target_as = chalcedon_patriarch }
			catholic = { save_event_target_as = victor_religion }
			orthodox = { save_event_target_as = losing_religion }
		}

		# Religion Heads First
		# The Pope
		event_target:chalcedon_pope = {
			set_character_flag = converting_religion
			remove_trait = greek_rites
			remove_trait = latin_rites
			unsafe_religion = catholic
			clr_character_flag = converting_religion
			set_government_type = theocracy_government
			any_liege = {
				limit = { tier = EMPEROR }
				save_event_target_as = new_liege
			}
			k_papal_state = {
				activate_title = { title = THIS status = yes }
				copy_title_history = k_pentarch_rome
				gain_title = PREV
				make_primary_title = yes
			}
			k_pentarch_rome = {
				unsafe_destroy_landed_title = THIS
				activate_title = { title = THIS status = no }
			}
			if = {
				limit = { event_target:new_liege = { is_alive = yes } }
				set_defacto_liege = event_target:new_liege
				pf_liege_change_effect = yes
			}
		}
		# The Patriarch
		event_target:chalcedon_patriarch = {
			set_character_flag = converting_religion
			remove_trait = greek_rites
			remove_trait = latin_rites
			unsafe_religion = orthodox
			clr_character_flag = converting_religion
			set_government_type = theocracy_government
			any_liege = {
				limit = { tier = EMPEROR }
				save_event_target_as = new_liege
			}
			k_orthodox = {
				activate_title = { title = THIS status = yes }
				copy_title_history = b_hagiasophia
				gain_title = PREV
				make_primary_title = yes
			}
			if = {
				limit = { event_target:new_liege = { is_alive = yes } }
				set_defacto_liege = event_target:new_liege
				pf_liege_change_effect = yes
			}
		}

		# Everyone Else
		any_character = {
			limit = { religion = chalcedonian }

			# Theocracy Sanity Check
			if = {
				limit = { is_theocracy = yes }
				set_character_flag = converting_religion
			}

			if = {
				limit = {
					trait = zealous
					trait = latin_rites
				}
				remove_trait = latin_rites
				unsafe_religion = catholic
			}
			else_if = {
				limit = {
					trait = zealous
					trait = greek_rites
				}
				remove_trait = greek_rites
				unsafe_religion = orthodox
			}
			else = {
				remove_trait = greek_rites
				remove_trait = latin_rites
				unsafe_religion = event_target:victor_religion
			}

			if = {
				limit = { has_character_flag = converting_religion }
				clr_character_flag = converting_religion
				set_government_type = theocracy_government
			}
		}
		any_character = {
			limit = { secret_religion = chalcedonian }
			set_secret_religion = event_target:victor_religion
		}

		# Set holy orders
		if = {
			limit = { d_knights_calatrava = { has_holder = yes } }
			d_knights_calatrava = { religion = event_target:victor_religion }
		}
		if = {
			limit = { d_knights_hospitaler = { has_holder = yes } }
			d_knights_hospitaler = { religion = event_target:victor_religion }
		}
		if = {
			limit = { d_knights_santiago = { has_holder = yes } }
			d_knights_santiago = { religion = event_target:victor_religion }
		}
		if = {
			limit = { d_knights_templar = { has_holder = yes } }
			d_knights_templar = { religion = event_target:victor_religion }
		}
		if = {
			limit = { d_teutonic_order = { has_holder = yes } }
			d_teutonic_order = { religion = event_target:victor_religion }
		}
		if = {
			limit = { d_holy_sepulchre = { has_holder = yes } }
			d_holy_sepulchre = { religion = event_target:victor_religion }
		}

		# Convert the land too
		any_independent_ruler = {
			if = {
				limit = { religion = catholic }
				any_realm_province = {
					limit = { religion = chalcedonian }
					religion = catholic
				}
				any_realm_province = {
					limit = { has_province_modifier = secret_chalcedonian_community }
					remove_province_modifier = secret_chalcedonian_community
					add_province_modifier = { name = secret_catholic_community duration = -1 }
				}
			}
			else_if = {
				limit = { religion = orthodox }
				any_realm_province = {
					limit = { religion = chalcedonian }
					religion = orthodox
				}
				any_realm_province = {
					limit = { has_province_modifier = secret_chalcedonian_community }
					remove_province_modifier = secret_chalcedonian_community
					add_province_modifier = { name = secret_orthodox_community duration = -1 }
				}
			}
			else = {
				any_realm_province = {
					limit = { religion = chalcedonian }
					religion = event_target:victor_religion
				}
				any_realm_province = {
					limit = { has_province_modifier = secret_chalcedonian_community }
					remove_province_modifier = secret_chalcedonian_community
				}
			}
		}

		# Set Up Hierarchy
		set_parent_religion = { religion = event_target:victor_religion parent = 0 }
		set_parent_religion = { religion = cathar parent = event_target:victor_religion }
		set_parent_religion = { religion = waldensian parent = event_target:victor_religion }
		set_parent_religion = { religion = lollard parent = event_target:victor_religion }
		set_parent_religion = { religion = adoptionist parent = event_target:victor_religion }
		set_parent_religion = { religion = bogomilist parent = event_target:victor_religion }
		set_parent_religion = { religion = monothelite parent = event_target:victor_religion }
		set_parent_religion = { religion = iconoclast parent = event_target:victor_religion }
		set_parent_religion = { religion = event_target:losing_religion parent = event_target:victor_religion}
		set_parent_religion = { religion = chalcedonian parent = 0 }

		# Clean Up
		any_character = {
			limit = { religion = chalcedonian }
			unsafe_religion = event_target:victor_religion
		}
		any_character = {
			limit = { has_character_flag = converting_religion }
			set_government_type = theocracy_government
			clr_character_flag = converting_religion
		}
		any_province = {
			limit = { religion = chalcedonian }
			religion = event_target:victor_religion
		}
		any_province = {
			limit = { has_province_modifier = secret_chalcedonian_community }
			remove_province_modifier = secret_chalcedonian_community
		}
		clr_global_flag = attacked_by_papal_emperor
		clr_global_flag = filioque_adopted
		clr_global_flag = papal_jurisdiction_dispute
		clr_global_flag = eucharist_conflict
		clr_global_flag = wicked_pope_patriarch
		clr_global_flag = ecumenical_council_refused
		any_character = {
			limit = {
				religion = event_target:victor_religion
				controls_religion = yes
			}
			narrative_event = { id = schismPlus.005 }
		}
	}
}

# 005: Narrate Schism Prevented
narrative_event = {
	id = schismPlus.005

	title = EVTNAME_Plus_2288
	picture = GFX_evt_pope
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	hide_from = yes
	major = yes
	show_root = yes

	major_trigger = { ai = no }

	desc = {
		text = EVTDESC_Plus_2288_pope1
		trigger = {
			ROOT = { religion = catholic }
			FROM = { NOT = { character = ROOT } }
		}
	}
	desc = {
		text = EVTDESC_Plus_2288_pope2
		trigger = {
			ROOT = { religion = catholic }
			FROM = { character = ROOT }
		}
	}
	desc = {
		text = EVTDESC_Plus_2288_patriarch1
		trigger = {
			ROOT = { religion = orthodox }
			FROM = { NOT = { character = ROOT } }
		}
	}
	desc = {
		text = EVTDESC_Plus_2288_patriarch2
		trigger = {
			ROOT = { religion = orthodox }
			FROM = { character = ROOT }
		}
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2288
			trigger = {
				religion = ROOT
			}
		}
		name = {
			text = EVTOPTB_Plus_2288
			trigger = {
				religion_group = christian
				NOT = { religion = ROOT }
			}
		}
		name = {
			text = EVTOPTC_Plus_2288
			trigger = {
				NOT = { religion_group = christian }
			}
		}
	}
}

# 006: Schism Occurs
character_event = {
	id = schismPlus.006

	hide_window = yes

	only_rulers = yes
	religion = miaphysite

	trigger = {
		NOR = {
			has_global_flag = schism_prevented
			has_global_flag = schism_happened
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		year >= 950
		any_demesne_province = { has_flag = pulse_province }
		k_pentarch_rome = {
			holder_scope = {
				religion = chalcedonian
				trait = latin_rites
			}
		}
		b_hagiasophia = {
			holder_scope = {
				OR = {
					AND = {
						religion = chalcedonian
						trait = greek_rites
					}
					religion = iconoclast
				}
			}
		}
		496 = { check_variable = { which = "schism_tracker" value = 3.9 } }
	}

	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.5
			year = 1000
		}
		modifier = {
			factor = 0.5
			year = 1050
		}
		modifier = {
			factor = 0.5
			year = 1100
		}
		modifier = {
			factor = 0.5
			496 = { check_variable = { which = "schism_tracker" value = 4.9 } }
		}
		modifier = {
			factor = 0.5
			496 = { check_variable = { which = "schism_tracker" value = 5.9 } }
		}
		modifier = {
			factor = 0.5
			496 = { check_variable = { which = "schism_tracker" value = 6.9 } }
		}
	}

	immediate = {
		set_global_flag = schism_happened
		k_pentarch_rome = { holder_scope = { save_event_target_as = chalcedon_pope } }
		if = {
			limit = { b_hagiasophia = { holder_scope = { religion = iconoclast } } }
			create_character = {
				religion = orthodox
				culture = greek
				dynasty = random
				female = no
				trait = zealous
				age = 40
			}
			new_character = { save_event_target_as = chalcedon_patriarch }
			iconoclast = { save_event_target_as = eastern_religion }
			orthodox = { save_event_target_as = eastern_heresy }
		}
		else = {
			b_hagiasophia = { holder_scope = { save_event_target_as = chalcedon_patriarch } }
			orthodox = { save_event_target_as = eastern_religion }
			iconoclast = { save_event_target_as = eastern_heresy }
		}

		# Prepare the People
		any_character = {
			limit = {
				religion = chalcedonian
				NOT = { has_landed_title = k_pentarch_rome }
				NOT = { has_landed_title = b_hagiasophia }
				NOT = { has_character_flag = convert_to_catholic }
				NOT = { trait = latin_rites }
				OR = {
					trait = greek_rites
					rightful_religious_head_scope = { trait = greek_rites }
					location = {
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = world_africa_west
							region = custom_morocco
							region = custom_algiers
							region = custom_africa
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
				}
			}
			if = {
				limit = { is_theocracy = yes }
				set_character_flag = converting_religion
			}
			set_character_flag = convert_to_orthodox
		}
		any_character = {
			limit = {
				secret_religion = chalcedonian
				location = {
					NOR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
						region = world_africa_west
						region = custom_morocco
						region = custom_algiers
						region = custom_africa
						region = custom_croatia
						region = custom_poland
						region = custom_carpathia
					}
				}
			}
			set_secret_religion = event_target:eastern_religion
		}
		any_character = {
			limit = {
				religion = chalcedonian
				NOT = { has_landed_title = k_pentarch_rome }
				NOT = { has_landed_title = b_hagiasophia }
				NOT = { has_character_flag = convert_to_orthodox }
				NOT = { trait = greek_rites }
				OR = {
					trait = latin_rites
					rightful_religious_head_scope = { trait = latin_rites }
					location = {
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = world_africa_west
							region = custom_morocco
							region = custom_algiers
							region = custom_africa
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
				}
			}
			if = {
				limit = { is_theocracy = yes }
				set_character_flag = converting_religion
			}
			set_character_flag = convert_to_catholic
		}
		any_character = {
			limit = {
				secret_religion = chalcedonian
				location = {
					OR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
						region = world_africa_west
						region = custom_morocco
						region = custom_algiers
						region = custom_africa
						region = custom_croatia
						region = custom_poland
						region = custom_carpathia
					}
				}
			}
			set_secret_religion = catholic
		}

		# Convert the Religion Heads
		event_target:chalcedon_pope = {
			set_character_flag = converting_religion
			remove_trait = greek_rites
			remove_trait = latin_rites
			unsafe_religion = catholic
			clr_character_flag = converting_religion
			set_government_type = theocracy_government
			any_liege = {
				limit = { tier = EMPEROR }
				save_event_target_as = new_liege
			}
			k_papal_state = {
				activate_title = { title = THIS status = yes }
				copy_title_history = k_pentarch_rome
				gain_title = PREV
				make_primary_title = yes
			}
			k_pentarch_rome = {
				unsafe_destroy_landed_title = THIS
				activate_title = { title = THIS status = no }
			}
			if = {
				limit = { event_target:new_liege = { is_alive = yes } }
				set_defacto_liege = event_target:new_liege
				pf_liege_change_effect = yes
			}
		}
		event_target:chalcedon_patriarch = {
			set_character_flag = converting_religion
			remove_trait = greek_rites
			remove_trait = latin_rites
			unsafe_religion = orthodox
			clr_character_flag = converting_religion
			set_government_type = theocracy_government
			any_liege = {
				limit = { tier = EMPEROR }
				save_event_target_as = new_liege
			}
			k_orthodox = {
				activate_title = { title = THIS status = yes }
				copy_title_history = b_hagiasophia
				gain_title = PREV
				make_primary_title = yes
			}
			if = {
				limit = { event_target:new_liege = { is_alive = yes } }
				set_defacto_liege = event_target:new_liege
				pf_liege_change_effect = yes
			}
		}

		# Convert the People
		any_character = {
			limit = { has_character_flag = convert_to_catholic }
			unsafe_religion = catholic
			if = {
				limit = { has_character_flag = converting_religion }
				set_government_type = theocracy_government
				clr_character_flag = converting_religion
			}
			clr_character_flag = convert_to_catholic
		}
		any_character = {
			limit = { has_character_flag = convert_to_orthodox }
			unsafe_religion = orthodox
			if = {
				limit = { has_character_flag = converting_religion }
				set_government_type = theocracy_government
				clr_character_flag = converting_religion
			}
			clr_character_flag = convert_to_orthodox
		}

		# Convert the Land
		any_independent_ruler = {
			limit = {
				OR = {
					religion = event_target:eastern_religion
					religion = event_target:eastern_heresy
				}
			}
			any_realm_province = {
				limit = { religion = chalcedonian }
				religion = event_target:eastern_religion
			}
		}
		any_independent_ruler = {
			limit = { religion = catholic }
			any_realm_province = {
				limit = { religion = chalcedonian }
				religion = catholic
			}
		}
		any_independent_ruler = {
			limit = {
				NOR = {
					religion = catholic
					religion = event_target:eastern_religion
					religion = event_target:eastern_heresy
				}
			}
			any_realm_province = {
				limit = { religion = chalcedonian }
				if = {
					limit = {
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = world_africa_west
							region = custom_morocco
							region = custom_algiers
							region = custom_africa
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
					religion = catholic
				}
				else_if = {
					limit = {
						NOR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = world_africa_west
							region = custom_morocco
							region = custom_algiers
							region = custom_africa
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
					religion = event_target:eastern_religion
				}
			}
		}
		# Coptic Pope has land too
		any_realm_province = {
			limit = { religion = chalcedonian }
			if = {
				limit = {
					OR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
						region = world_africa_west
						region = custom_morocco
						region = custom_algiers
						region = custom_africa
						region = custom_croatia
						region = custom_poland
						region = custom_carpathia
					}
				}
				religion = catholic
			}
			else_if = {
				limit = {
					NOR = {
						region = world_europe_west
						region = world_europe_north
						region = world_europe_south_italy
						region = world_africa_west
						region = custom_morocco
						region = custom_algiers
						region = custom_africa
						region = custom_croatia
						region = custom_poland
						region = custom_carpathia
					}
				}
				religion = event_target:eastern_religion
			}
		}

		# reset catholic/orthodox holy orders
		if = {
			limit = { d_knights_calatrava = { has_holder = yes } }
			d_knights_calatrava = {
				holder_scope = {
					unsafe_religion = catholic
					any_courtier = { unsafe_religion = catholic }
				}
				religion = catholic
			}
		}
		if = {
			limit = { d_knights_hospitaler = { has_holder = yes } }
			d_knights_hospitaler = {
				holder_scope = {
					unsafe_religion = catholic
					any_courtier = { unsafe_religion = catholic }
				}
				religion = catholic
			}
		}
		if = {
			limit = { d_knights_santiago = { has_holder = yes } }
			d_knights_santiago = {
				holder_scope = {
					unsafe_religion = catholic
					any_courtier = { unsafe_religion = catholic }
				}
				religion = catholic
			}
		}
		if = {
			limit = { d_knights_templar = { has_holder = yes } }
			d_knights_templar = {
				holder_scope = {
					unsafe_religion = catholic
					any_courtier = { unsafe_religion = catholic }
				}
				religion = catholic
			}
		}
		if = {
			limit = { d_teutonic_order = { has_holder = yes } }
			d_teutonic_order = {
				holder_scope = {
					unsafe_religion = catholic
					any_courtier = { unsafe_religion = catholic }
				}
				religion = catholic
			}
		}
		if = {
			limit = { d_holy_sepulchre = { has_holder = yes } }
			d_holy_sepulchre = {
				holder_scope = {
					unsafe_religion = orthodox
					any_courtier = { unsafe_religion = orthodox }
				}
				religion = orthodox
			}
		}

		# Clean up any missed
		any_character = {
			limit = { religion = chalcedonian }
			if = {
				limit = {
					location = {
						OR = {
							region = world_europe_west
							region = world_europe_north
							region = world_europe_south_italy
							region = world_africa_west
							region = custom_morocco
							region = custom_algiers
							region = custom_africa
							region = custom_croatia
							region = custom_poland
							region = custom_carpathia
						}
					}
				}
				religion = catholic
				if = {
					limit = { is_ruler = yes }
					any_realm_province = {
						limit = { religion = chalcedonian }
						religion = catholic
					}
					any_realm_province = {
						limit = { has_province_modifier = secret_chalcedonian_community }
						remove_province_modifier = secret_chalcedonian_community
						add_province_modifier = { name = secret_catholic_community duration = -1 }
					}
				}
			}
			else = {
				religion = orthodox
				if = {
					limit = { is_ruler = yes }
					any_realm_province = {
						limit = { religion = chalcedonian }
						religion = orthodox
					}
					any_realm_province = {
						limit = { has_province_modifier = secret_chalcedonian_community }
						remove_province_modifier = secret_chalcedonian_community
						add_province_modifier = { name = secret_orthodox_community duration = -1 }
					}
				}
			}
		}
		any_character = {
			limit = {
				OR = {
					has_character_flag = convert_to_orthodox
					has_character_flag = convert_to_catholic
				}
			}
			clr_character_flag = convert_to_orthodox
			clr_character_flag = convert_to_catholic
		}

		# reset catholic/orthodox heresies
		set_parent_religion = { religion = cathar parent = catholic }
		set_parent_religion = { religion = waldensian parent = catholic }
		set_parent_religion = { religion = lollard parent = catholic }
		set_parent_religion = { religion = adoptionist parent = catholic }
		set_parent_religion = { religion = event_target:eastern_heresy parent = event_target:eastern_religion }
		set_parent_religion = { religion = iconoclast parent = event_target:eastern_religion }
		set_parent_religion = { religion = monothelite parent = event_target:eastern_religion }
		if = {
			limit = {
				NOT = { is_title_active = d_bogomilist }
			}
			set_parent_religion = { religion = bogomilist parent = event_target:eastern_religion }
		}
		set_parent_religion = { religion = chalcedonian parent = 0 }

		# Inform players
		any_player = { narrative_event = { id = schismPlus.007 } } # 005: Narrate the Schism
	}
}

# 007: Narrate Schism Occurs
narrative_event = {
	id = schismPlus.007

	title = EVTNAME_Plus_2286
	desc = EVTDESC_Plus_2286
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		# Formerly Chalcedonian response
		name = {
			text = EVTOPTC_Plus_2286 #This is of great concern...
			trigger = {
				OR = {
					religion = catholic
					religion = orthodox
				}
			}
		}
		# No one else cares
		name = {
			text = EVTOPTD_Plus_2286 #Nothing to do with me
			trigger = {
				NOR = {
					religion = catholic
					religion = orthodox
				}
			}
		}
	}
}

#######################################
#
# 040 - 049: Greek/Latin Rites
#
#######################################
#
# INDEX
#
# 040: Greek/Latin Rites Control
# 041: Patriarch demands that a priest switch rites
# 042: Relations between Greek/Latin realms
#
#######################################

# 040: Greek/Latin Rites Control
character_event = {
	id = schismPlus.040

	is_triggered_only = yes
	hide_window = yes

	religion = chalcedonian
	trigger = {
		NOT = { has_global_flag = schism_prevented }
		religion = chalcedonian
		OR = {
			AND = {
				is_theocracy = yes
				NOR = {
					trait = greek_rites
					trait = latin_rites
				}
			}
			AND = {
				is_theocracy = no
				OR = {
					trait = greek_rites
					trait = latin_rites
				}
			}
		}
	}
	immediate = {
		if = {
			limit = {
				religion = chalcedonian
				is_theocracy = yes
				NOR = {
					trait = greek_rites
					trait = latin_rites
				}
			}
			random_list = {
				50 = {
					add_trait = greek_rites
					modifier = {
						factor = 0
						rightful_religious_head_scope = { trait = latin_rites }
					}
					modifier = {
						factor = 2
						OR = {
							culture_group = byzantine
							top_liege = { has_landed_title = e_byzantium }
						}
					}
					modifier = {
						factor = 5
						capital_scope = {
							NOR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
								region = world_africa_west
								region = custom_morocco
								region = custom_algiers
								region = custom_africa
								region = custom_croatia
								region = custom_poland
								region = custom_carpathia
							}
						}
					}
				}
				50 = {
					add_trait = latin_rites
					modifier = {
						factor = 0
						rightful_religious_head_scope = { trait = greek_rites }
					}
					modifier = {
						factor = 2
						OR = {
							culture_group = latin
							top_liege = { has_landed_title = e_hre }
						}
					}
					modifier = {
						factor = 5
						capital_scope = {
							OR = {
								region = world_europe_west
								region = world_europe_north
								region = world_europe_south_italy
								region = world_africa_west
								region = custom_morocco
								region = custom_algiers
								region = custom_africa
								region = custom_croatia
								region = custom_poland
								region = custom_carpathia
							}
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				religion = chalcedonian
				is_theocracy = no
				OR = {
					trait = greek_rites
					trait = latin_rites
				}
			}
			remove_trait = greek_rites
			remove_trait = latin_rites
		}
	}
}

# 041: Patriarch demands that a priest switch rites
character_event = {
	id = schismPlus.041

	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	desc = {
		text = EVTDESC_Plus_2277_latin
		trigger = { trait = greek_rites }
	}
	desc = {
		text = EVTDESC_Plus_2277_greek
		trigger = { trait = latin_rites }
	}

	only_rulers = yes
	religion = chalcedonian
	min_age = 16
	only_capable = yes
	prisoner = no

	trigger = {
		religion_authority = 0.50
		is_theocracy = yes
		has_regent = no
		rightful_religious_head_scope = {
			has_regent = no
			NOT = { character = ROOT }
			NOT = { has_opinion_modifier = { who = ROOT modifier = refused_to_change_rite } }
			OR = {
				NOT = { ROOT = { religion_head = { always = yes } } }
				controls_religion = yes
			}
			OR = {
				NOT = { opinion = { who = ROOT value = 0 } }
				is_vassal_or_below = ROOT
			}
			OR = {
				AND = {
					trait = latin_rites
					ROOT = { trait = greek_rites }
				}
				AND = {
					trait = greek_rites
					ROOT = { trait = latin_rites }
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.5
			rightful_religious_head_scope = {
				is_vassal_or_below = ROOT
			}
		}
		modifier = {
			factor = 0.8
			rightful_religious_head_scope = {
				NOT = { opinion = { who = ROOT value = -20 } }
			}
		}
		modifier = {
			factor = 0.8
			rightful_religious_head_scope = {
				NOT = { opinion = { who = ROOT value = -40 } }
			}
		}
		modifier = {
			factor = 0.8
			rightful_religious_head_scope = {
				NOT = { opinion = { who = ROOT value = -60 } }
			}
		}
		modifier = {
			factor = 0.8
			rightful_religious_head_scope = {
				NOT = { opinion = { who = ROOT value = -80 } }
			}
		}
	}

	immediate = {
		rightful_religious_head_scope = { save_event_target_as = rightful_relhead }
		if = {
			limit = { NOT = { religion_head = { always = yes } } }
			religion_authority = {
				modifier = greek-latin_conflict
			}
		}
	}

	option = {
		name = EVTOPTA_Plus_2277 # Refuse
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				rightful_religious_head_scope = {
					is_vassal_or_below = ROOT
					NOT = { is_liege_of = ROOT }
				}
			}
			modifier = {
				factor = 0.1
				rightful_religious_head_scope = {
					is_liege_of = ROOT
				}
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = {
					reverse_opinion = { who = ROOT value = 0 }
				}
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = {
					reverse_opinion = { who = ROOT value = 20 }
				}
			}
			modifier = {
				factor = 1.5
				rightful_religious_head_scope = {
					reverse_opinion = { who = ROOT value = 40 }
				}
			}
			modifier = {
				factor = 1.5
				rightful_religious_head_scope = {
					reverse_opinion = { who = ROOT value = 60 }
				}
			}
			modifier = {
				factor = 2
				rightful_religious_head_scope = {
					reverse_opinion = { who = ROOT value = 80 }
				}
			}
		}
		rightful_religious_head_scope = {
			opinion = { who = ROOT modifier = refused_to_change_rite years = 10 }
			prestige = -25
		}
		piety = -25
	}
	option = {
		name = EVTOPTB_Plus_2277 # Agree
		ai_chance = {
			factor = 70
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = {
					NOT = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = {
					NOT = { reverse_opinion = { who = ROOT value = -20 } }
				}
			}
			modifier = {
				factor = 1.5
				rightful_religious_head_scope = {
					NOT = { reverse_opinion = { who = ROOT value = -40 } }
				}
			}
			modifier = {
				factor = 1.5
				rightful_religious_head_scope = {
					NOT = { reverse_opinion = { who = ROOT value = -60 } }
				}
			}
			modifier = {
				factor = 2
				rightful_religious_head_scope = {
					NOT = { reverse_opinion = { who = ROOT value = -80 } }
				}
			}
		}
		if = {
			limit = { rightful_religious_head_scope = { trait = greek_rites } }
			add_trait = greek_rites
			rightful_religious_head_scope = {
				any_independent_ruler = {
					if = {
						limit = { trait = latin_rites }
						opinion = { who = PREV modifier = opinion_disappointed years = 10 }
					}
					any_realm_lord = {
						if = {
							limit = { trait = latin_rites }
							opinion = { who = PREVPREV modifier = opinion_disappointed years = 10 }
						}
					}
				}
			}
		}
		if = {
			limit = { rightful_religious_head_scope = { trait = latin_rites } }
			add_trait = latin_rites
			rightful_religious_head_scope = {
				any_independent_ruler = {
					if = {
						limit = { trait = greek_rites }
						opinion = { who = PREV modifier = opinion_disappointed years = 10 }
					}
					any_realm_lord = {
						if = {
							limit = { trait = greek_rites }
							opinion = { who = PREVPREV modifier = opinion_disappointed years = 10 }
						}
					}
				}
			}
		}
	}
}

# 042: Relations between Greek/Latin realms
character_event = {
	id = schismPlus.042

	hide_window = yes
	is_triggered_only = yes

	only_independent = yes
	religion = chalcedonian

	trigger = {
		OR = {
			NOT = { has_character_flag = check_greek_latin }
			had_character_flag = { flag = check_greek_latin days = 365 }
		}
		NOR = {
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
		}
	}

	immediate = {
		set_character_flag = check_greek_latin
		if = {
			limit = { rightful_religious_head_scope = { trait = greek_rites } }
			any_independent_ruler = {
				limit = { rightful_religious_head_scope = { trait = latin_rites } }
				if = {
					limit = { NOT = { has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } } }
					opinion = { who = ROOT modifier = greek_latin_relations years = 100 }
				}
				if = {
					limit = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } } }
					reverse_opinion = { who = ROOT modifier = greek_latin_relations years = 100 }
				}
			}
			any_independent_ruler = {
				limit = { rightful_religious_head_scope = { trait = greek_rites } }
				if = {
					limit = { has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } }
					remove_opinion = { who = ROOT modifier = greek_latin_relations }
				}
				if = {
					limit = { reverse_has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } }
					reverse_remove_opinion = { who = ROOT modifier = greek_latin_relations }
				}
			}
		}
		else_if = {
			limit = { rightful_religious_head_scope = { trait = latin_rites } }
			any_independent_ruler = {
				limit = { rightful_religious_head_scope = { trait = greek_rites } }
				if = {
					limit = { NOT = { has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } } }
					opinion = { who = ROOT modifier = greek_latin_relations years = 100 }
				}
				if = {
					limit = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } } }
					reverse_opinion = { who = ROOT modifier = greek_latin_relations years = 100 }
				}
			}
			any_independent_ruler = {
				limit = { rightful_religious_head_scope = { trait = latin_rites } }
				if = {
					limit = { has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } }
					remove_opinion = { who = ROOT modifier = greek_latin_relations }
				}
				if = {
					limit = { reverse_has_opinion_modifier = { who = ROOT modifier = greek_latin_relations } }
					reverse_remove_opinion = { who = ROOT modifier = greek_latin_relations }
				}
			}
		}
	}
}

#######################################
#
# 050 - 059: The Pentarchy
#
#######################################
#
# INDEX
#
#
#######################################



#######################################
#
# 060 - 069: Ecumenical Councils
#
#######################################
#
# INDEX
# 060: Council called
# 061: Rulers informed and get to choose
# 062: Council Ended
#
#######################################

# 060: Council called
long_character_event = {
	id = schismPlus.060

	title = EVTNAME_Plus_2230
	picture = GFX_evt_great_schism
	border = GFX_event_long_frame_religion

	is_triggered_only = yes

	# Mend Great Schism
	desc = {
		text = EVTDESC_Plus_2230
		trigger = { has_global_flag = schism_mending }
	}
	# Enforce Ephesus
	desc = {
		text = EVTDESC_Plus_2234
		trigger = { has_global_flag = enforcing_ephesus }
	}
	# Enforce Chalcedon
	desc = {
		text = EVTDESC_Plus_2238
		trigger = { has_global_flag = enforcing_chalcedon }
	}
	# Repudiate Ephesus
	desc = {
		text = EVTDESC_Plus_2242
		trigger = { has_global_flag = repudiating_ephesus }
	}
	# Repudiate Chalcedon
	desc = {
		text = EVTDESC_Plus_2246
		trigger = { has_global_flag = repudiating_chalcedon }
	}
	# Unite Christianity
	desc = {
		text = EVTDESC_Plus_2250
		trigger = { has_global_flag = uniting_christianity }
	}

	immediate = {
		# Pick the Location and Chair
		save_event_target_as = council_holder
		random_realm_title = {
			limit = {
				tier = BARON
				holder_scope = { religion = ROOT }
				holding_type = temple
			}
			location = { save_event_target_as = council_location }
		}
		religion_head = { save_event_target_as = mender_religion }

		# Great Schism
		if = {
			limit = { has_global_flag = schism_mending }
			if = {
				limit = {
					is_catholic_branch = yes
				}
				any_title = {
					limit = {
						OR = {
							title = k_orthodox
							title = d_monothelite
							title = d_iconoclast
							title = d_bogomilist
						}
						has_holder = yes
						holder_scope = { is_heretic = no }
					}
					holder_scope = { save_event_target_as = target_religion }
				}
			}
			else = {
				any_title = {
					limit = {
						OR = {
							title = k_papal_state
							title = d_fraticelli
							title = d_cathar
						}
						has_holder = yes
						holder_scope = { is_heretic = no }
					}
					holder_scope = { save_event_target_as = target_religion }
				}
			}
		}

		# Council of Ephesus
		else_if = {
			limit = { has_global_flag = enforcing_ephesus }
			any_title = {
				limit = {
					OR = {
						title = d_nestorian
						title = d_messalian
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = { save_event_target_as = target_religion }
			}
		}

		# Council of Chalcedon
		else_if = {
			limit = { has_global_flag = enforcing_chalcedon }
			any_title = {
				limit = {
					OR = {
						title = d_miaphysite
						title = d_monophysite
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = { save_event_target_as = target_religion }
			}
			any_title = {
				limit = {
					OR = {
						title = d_apostolic
						title = d_paulician
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = { save_event_target_as = target_religion2 }
			}
		}

		# Repudiate instead
		else_if = {
			limit = {
				OR = {
					has_global_flag = repudiating_ephesus
					has_global_flag = repudiating_chalcedon
				}
			}
			any_title = {
				limit = {
					OR = {
						title = k_orthodox
						title = d_monothelite
						title = d_iconoclast
						title = d_bogomilist
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = { save_event_target_as = target_religion }
			}
		}

		# Unite Christianity
		else_if = {
			limit = { has_global_flag = uniting_christianity }
			any_title = {
				limit = {
					OR = {
						title = k_papal_state
						title = d_cathar
						title = d_fraticelli
					}
					has_holder = yes
					holder_scope = { is_heretic = no }
				}
				holder_scope = { save_event_target_as = target_religion }
			}
		}

		# No Distractions
		add_character_modifier = {
			modifier = do_not_disturb
			hidden = yes
			duration = 30
		}

		# Fire the ending event
		narrative_event = { id = schismPlus.062 days = 30 }
	}

	option = {
		name = EVTOPTA_Plus_2230
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					OR = {
						religion = event_target:target_religion
						religion = event_target:target_religion2
					}
					NOT = { trait = zealous }
				}
				if = {
					limit = { is_theocracy = yes }
					set_character_flag = converting_religion
				}
				religion = event_target:mender_religion
				clr_character_flag = converting_religion
			}
			any_realm_province = {
				limit = {
					OR = {
						religion = event_target:target_religion
						religion = event_target:target_religion2
					}
				}
				religion = event_target:mender_religion
			}
			any_independent_ruler = {
				limit = {
					OR = {
						religion = event_target:target_religion
						religion = event_target:target_religion2
					}
					OR = {
						NOT = { trait = zealous }
						ai = no
					}
				}
				narrative_event = { id = schismPlus.061 random = 4 }
			}
		}
	}
}

# 061: Rulers informed and get to choose
narrative_event = {
	id = schismPlus.061

	title = EVTNAME_Plus_2230
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	hide_from = yes

	trigger = {
		OR = {
			religion = event_target:target_religion
			religion = event_target:target_religion2
		}
	}

	# Mend Great Schism
	desc = {
		text = EVTDESC_Plus_2230
		trigger = { has_global_flag = schism_mending }
	}
	# Enforce Ephesus
	desc = {
		text = EVTDESC_Plus_2234
		trigger = { has_global_flag = enforcing_ephesus }
	}
	# Enforce Chalcedon
	desc = {
		text = EVTDESC_Plus_2238
		trigger = { has_global_flag = enforcing_chalcedon }
	}
	# Repudiate Ephesus
	desc = {
		text = EVTDESC_Plus_2242
		trigger = { has_global_flag = repudiating_ephesus }
	}
	# Repudiate Chalcedon
	desc = {
		text = EVTDESC_Plus_2246
		trigger = { has_global_flag = repudiating_chalcedon }
	}
	# Unite Christianity
	desc = {
		text = EVTDESC_Plus_2250
		trigger = { has_global_flag = uniting_christianity }
	}

	# Convert
	option = {
		name = EVTOPTA_Plus_2231
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				OR = {
					trait = zealous
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
				}
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = content
			}
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					OR = {
						religion = event_target:target_religion
						religion = event_target:target_religion2
					}
					NOT = { trait = zealous }
				}
				if = {
					limit = { is_theocracy = yes }
					set_character_flag = converting_religion
				}
				religion = event_target:mender_religion
				clr_character_flag = converting_religion
			}
			any_realm_province = {
				limit = {
					OR = {
						religion = event_target:target_religion
						religion = event_target:target_religion2
					}
				}
				religion = event_target:mender_religion
			}
		}
	}
	# Don't Convert
	option = {
		name = EVTOPTB_Plus_2231 # Don't Convert
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOR = {
					trait = zealous
					trait = lunatic
					trait = proud
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					has_character_modifier = voice_of_jesus
					has_character_modifier = voice_of_satan
					capital_holding = { holding_type = temple }
					real_tier = EMPEROR
					real_tier = KING
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = cynical
					has_character_modifier = defied_church
				}
			}
			modifier = {
				factor = 3
				trait = lunatic
			}
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 2.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 3
				trait = mastermind_theologian
			}
			modifier = {
				factor = 2
				real_tier = KING
			}
			modifier = {
				factor = 3
				real_tier = EMPEROR
			}
		}
		if = {
			limit = { NOT = { trait = zealous } }
			random = {
				chance = 25
				add_trait = zealous
			}
		}
	}
}

# 062: Council Ended
narrative_event = {
	id = schismPlus.062

	title = EVTNAME_Plus_2230
	desc = EVTDESC_Plus_2232
	picture = GFX_evt_great_schism
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	major = yes

	major_trigger = { religion_group = christian }

	# Mend Great Schism
	desc = {
		text = EVTDESC_Plus_2232
		trigger = { has_global_flag = schism_mending }
	}
	# Enforce Ephesus
	desc = {
		text = EVTDESC_Plus_2237
		trigger = { has_global_flag = enforcing_ephesus }
	}
	# Enforce Chalcedon
	desc = {
		text = EVTDESC_Plus_2241
		trigger = { has_global_flag = enforcing_chalcedon }
	}
	# Repudiate Ephesus
	desc = {
		text = EVTDESC_Plus_2245
		trigger = { has_global_flag = repudiating_ephesus }
	}
	# Repudiate Chalcedon
	desc = {
		text = EVTDESC_Plus_2249
		trigger = { has_global_flag = repudiating_chalcedon }
	}
	# Unite Christianity
	desc = {
		text = EVTDESC_Plus_2253
		trigger = { has_global_flag = uniting_christianity }
	}

	immediate = {
		event_target:mender_religion = {
			event_target:target_religion = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
			event_target:target_religion2 = {
				set_parent_religion = { religion = THIS parent = PREV }
			}
		}
	}

	option = {
		name = EVTOPTA_Plus_2232
		trigger = { religion = event_target:mender_religion }
		hidden_tooltip = {
			if = {
				limit = { character = event_target:council_holder }
				prestige = 1000
				set_character_flag = schism_mender
				give_nickname = nick_the_saint
				if = {
					limit = { has_global_flag = schism_mending }
					clr_global_flag = schism_mending
					set_global_flag = schism_mended
				}
				else_if = {
					limit = { has_global_flag = enforcing_ephesus }
					clr_global_flag = enforcing_ephesus
					set_global_flag = ephesus_enforced
				}
				else_if = {
					limit = { has_global_flag = enforcing_chalcedon }
					clr_global_flag = enforcing_chalcedon
					set_global_flag = chalcedon_enforced
				}
				else_if = {
					limit = { has_global_flag = repudiating_ephesus }
					clr_global_flag = repudiating_ephesus
					set_global_flag = ephesus_repudiated
				}
				else_if = {
					limit = { has_global_flag = repudiating_chalcedon }
					clr_global_flag = repudiating_chalcedon
					set_global_flag = chalcedon_repudiated
				}
				else_if = {
					limit = { has_global_flag = uniting_christianity }
					clr_global_flag = uniting_christianity
					set_global_flag = christianity_united
				}
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_2232
		trigger = {
			NOT = { religion = event_target:mender_religion }
			religion_group = christian
		}
	}
}

#######################################
#
# 070 - 079: Schism Lead Up
#
#######################################
#
# INDEX
#
# 070: Pope appoints Holy Roman Emperor
# 071: Holy Roman Emperor fights the Byzantine Empire
# 072: Rome adopts Filioque
# 073: Jurisdictional dispute over the Balkans
# 074: Conflict over the Eucharist
# 075: Wicked Pope or Patriarch
# 076: Call for Ecumenical Council refused
#
#######################################

# 070: Pope appoints Holy Roman Emperor
narrative_event = {
	id = schismPlus.070

	title = EVTNAME_Plus_2278
	desc = EVTDESC_Plus_2278
	picture = GFX_evt_found_hre
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes
	hide_from = yes
	show_ROOT = yes
	major = yes

	trigger = {
		NOR = {
			has_global_flag = schism_prevented
			has_global_flag = schism_happened
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
	}

	major_trigger = {
		ai = no
		religion_group = christian
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2278
			trigger = {
				religion = chalcedonian
				rightful_religious_head_scope = { trait = greek_rites }
			}
		}
		name = {
			text = EVTOPTB_Plus_2278
			trigger = {
				religion = chalcedonian
				rightful_religious_head_scope = { trait = latin_rites }
			}
		}
		name = {
			text = EVTOPTC_Plus_2278
			trigger = {
				religion_group = christian
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
		name = {
			text = EVTOPTD_Plus_2278
			trigger = {
				NOT = { religion_group = christian }
			}
		}
	}
}

# 071: Holy Roman Emperor fights the Byzantine Empire
narrative_event = {
	id = schismPlus.071

	title = EVTNAME_Plus_2279
	desc = EVTDESC_Plus_2279
	picture = GFX_evt_melee
	border = GFX_event_narrative_frame_religion

	major = yes
	hide_from = yes
	is_triggered_only = yes

	major_trigger = {
		ai = no
		religion_group = christian
	}

	trigger = {
		NOR = {
			has_global_flag = attacked_by_papal_emperor
			has_global_flag = schism_prevented
			has_global_flag = schism_happened
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		has_landed_title = e_byzantium
		religion = chalcedonian
		is_heretic = no
		NOT = { trait = excommunicated }
		OR = {
			any_war = {
				defender = { character = ROOT }
				attacker = {
					religion = ROOT
					NOT = { trait = excommunicated }
					trait = crowned_by_pope
				}
			}
			any_war = {
				attacker = { character = ROOT }
				defender = {
					religion = ROOT
					NOT = { trait = excommunicated }
					trait = crowned_by_pope
				}
			}
		}
	}

	weight_multiplier = { days = 30 }

	immediate = {
		log = "SCHISM LEAD-UP: WAR BETWEEN BYZANTIUM AND POPE'S CHAMPION"
		set_global_flag = attacked_by_papal_emperor
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
		random_current_enemy = {
			limit = { trait = crowned_by_pope }
			save_event_target_as = papal_emperor
		}
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2279
			trigger = {
				religion = chalcedonian
				rightful_religious_head_scope = { trait = greek_rites }
			}
		}
		name = {
			text = EVTOPTB_Plus_2279
			trigger = {
				religion = chalcedonian
				rightful_religious_head_scope = { trait = latin_rites }
			}
		}
		name = {
			text = EVTOPTC_Plus_2279
			trigger = {
				religion_group = christian
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
		hidden_tooltip = {
			clear_event_target = papal_emperor
		}
	}
}

# 072: Rome adopts Filioque
narrative_event = {
	id = schismPlus.072

	title = EVTNAME_Plus_2280
	desc = EVTDESC_Plus_2280
	picture = GFX_evt_pope
	border = GFX_event_narrative_frame_religion

	major = yes
	hide_from = yes
	show_ROOT = yes

	only_rulers = yes
	religion = chalcedonian

	trigger = {
		year = 900
		NOR = {
			religion_authority >= 0.75
			has_global_flag = filioque_adopted
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		has_landed_title = k_pentarch_rome
		trait = latin_rites
		is_heretic = no
	}

	major_trigger = {
		ai = no
		religion = chalcedonian
	}

	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.75
			year = 950
		}
		modifier = {
			factor = 0.5
			year = 1000
		}
		modifier = {
			factor = 0.5
			year = 1025
		}
		modifier = {
			factor = 0.25
			year = 1050
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.45
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.40
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.35
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.30
		}
	}

	immediate = {
		log = "SCHISM LEAD-UP: FILIOQUE ADOPTED"
		set_global_flag = filioque_adopted
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2280
			trigger = {
				rightful_religious_head_scope = { trait = greek_rites }
			}
		}
		name = {
			text = EVTOPTB_Plus_2280
			trigger = {
				rightful_religious_head_scope = { trait = latin_rites }
			}
		}
		name = {
			text = EVTOPTC_Plus_2280
			trigger = {
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
	}
}

# 073: Jurisdictional dispute over the Balkans
narrative_event = {
	id = schismPlus.073

	title = EVTNAME_Plus_2281
	desc = EVTDESC_Plus_2281
	picture = GFX_evt_pope
	border = GFX_event_narrative_frame_religion

	major = yes
	hide_from = yes
	show_ROOT = yes

	only_rulers = yes
	religion = chalcedonian

	trigger = {
		NOR = {
			has_global_flag = papal_jurisdiction_dispute
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		is_heretic = no
		has_landed_title = k_pentarch_rome
		trait = latin_rites
		b_hagiasophia = {
			holder_scope = {
				trait = greek_rites
				religion = ROOT
			}
		}
		any_independent_ruler = {
			religion = ROOT
			lower_real_tier_than = EMPEROR
			higher_real_tier_than = COUNT
			is_playable = yes
			mercenary = no
			holy_order = no
			is_landed = yes
			capital_scope = {
				religion = ROOT
				NOT = { empire = { title = e_byzantium } }
				kingdom = {
					OR = {
						title = k_bulgaria
						title = k_serbia
						title = k_croatia
						title = k_wallachia
					}
				}
			}
		}
	}

	major_trigger = {
		ai = no
		religion = chalcedonian
	}

	mean_time_to_happen = { days = 1 }

	immediate = {
		log = "SCHISM LEAD-UP: PAPAL JURISDICTION DISPUTE OVER [jurisdiction_realm.GetName]"
		set_global_flag = papal_jurisdiction_dispute
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
		b_hagiasophia = { holder_scope = { save_event_target_as = current_patriarch } }
		random_independent_ruler = {
			limit = {
				religion = ROOT
				lower_real_tier_than = EMPEROR
				higher_real_tier_than = COUNT
				is_playable = yes
				mercenary = no
				holy_order = no
				is_landed = yes
				capital_scope = {
					religion = ROOT
					NOT = { empire = { title = e_byzantium } }
					kingdom = {
						OR = {
							title = k_bulgaria
							title = k_serbia
							title = k_croatia
							title = k_wallachia
						}
					}
				}
			}
			primary_title = { save_event_target_as = jurisdiction_realm }
		}
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2281
			trigger = {
				rightful_religious_head_scope = { trait = greek_rites }
			}
		}
		name = {
			text = EVTOPTB_Plus_2281
			trigger = {
				rightful_religious_head_scope = { trait = latin_rites }
			}
		}
		name = {
			text = EVTOPTC_Plus_2281
			trigger = {
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
		clear_event_target = current_patriarch
		clear_event_target = jurisdiction_realm
	}
}

# 074: Conflict over the Eucharist
narrative_event = {
	id = schismPlus.074

	title = EVTNAME_Plus_2282
	picture = GFX_evt_bishop
	border = GFX_event_narrative_frame_religion

	desc = {
		text = EVTDESC_Plus_2282_greek
		trigger = { ROOT = { trait = greek_rites } }
	}
	desc = {
		text = EVTDESC_Plus_2282_latin
		trigger = { ROOT = { trait = latin_rites } }
	}

	major = yes
	hide_from = yes
	show_ROOT = yes

	only_rulers = yes
	religion = chalcedonian
	min_age = 16
	only_capable = yes
	war = no

	trigger = {
		year = 900
		NOR = {
			liege = { war = yes }
			trait = excommunicated
			is_inaccessible_trigger = yes
			has_global_flag = eucharist_conflict
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		rightful_religious_head = ROOT
		is_heretic = no
		NOR = {
			has_landed_title = b_hagiasophia
			has_landed_title = k_pentarch_rome
		}
	}

	major_trigger = { religion = chalcedonian }

	mean_time_to_happen = {
		years = 50
		modifier = {
			factor = 0.5
			year = 1000
		}
		modifier = {
			factor = 0.5
			year = 1025
		}
		modifier = {
			factor = 0.5
			year = 1050
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.45
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.40
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.35
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.30
		}
	}

	immediate = {
		log = "SCHISM LEAD-UP: CONFLICT OVER THE EUCHARIST"
		set_global_flag = eucharist_conflict
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2282
			trigger = { rightful_religious_head_scope = { trait = greek_rites } }
		}
		name = {
			text = EVTOPTB_Plus_2282
			trigger = { rightful_religious_head_scope = { trait = latin_rites } }
		}
		name = {
			text = EVTOPTC_Plus_2282
			trigger = {
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
	}
}

# 075: Wicked Pope or Patriarch
narrative_event = {
	id = schismPlus.075

	title = EVTNAME_Plus_2283
	desc = EVTDESC_Plus_2283
	picture = GFX_evt_pope
	border = GFX_event_narrative_frame_religion

	major = yes
	hide_from = yes
	show_ROOT = yes

	trigger = {
		NOR = {
			496 = { check_variable = { which = "schism_tracker" value >= 4 } }
			has_global_flag = wicked_pope_patriarch
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		OR = {
			has_landed_title = k_pentarch_rome
			has_landed_title = b_hagiasophia
		}
		is_heretic = no
		trait = bad_priest_christian
		intrigue < 12
		k_pentarch_rome = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				OR = {
					character = ROOT
					NOT = { trait = bad_priest_christian }
				}
			}
		}
		b_hagiasophia = {
			has_holder = yes
			holder_scope = {
				religion = ROOT
				OR = {
					character = ROOT
					NOT = { trait = bad_priest_christian }
				}
			}
		}
	}

	major_trigger = {
		ai = no
		religion_group = christian
	}

	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 2
			religion_authority = 0.70
		}
		modifier = {
			factor = 2
			religion_authority = 0.80
		}
		modifier = {
			factor = 2
			religion_authority = 0.90
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.50
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.45
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.40
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.35
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.30
		}
	}

	immediate = {
		log = "SCHISM LEAD-UP: [Root.GetTitledName] IS WICKED"
		set_global_flag = wicked_pope_patriarch
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
		if = {
			limit = { has_landed_title = k_pentarch_rome }
			b_hagiasophia = {
				holder_scope = { save_event_target_as = other_patriarch }
			}
		}
		if = {
			limit = { has_landed_title = b_hagiasophia }
			k_pentarch_rome = {
				holder_scope = { save_event_target_as = other_patriarch }
			}
		}
	}

	option = {
		name = EVTOPTA_Plus_2283
		clear_event_target = other_patriarch
	}
}

# 076: Call for Ecumenical Council refused
narrative_event = {
	id = schismPlus.076

	only_rulers = yes
	religion = chalcedonian

	title = EVTNAME_Plus_2284
	desc = EVTDESC_Plus_2284
	picture = GFX_evt_rival_rulers
	border = GFX_event_narrative_frame_religion

	major = yes
	hide_from = yes
	show_ROOT = yes

	trigger = {
		year = 1000
		NOR = {
			has_global_flag = ecumenical_council_refused
			has_global_flag = schism_happened
			has_global_flag = schism_prevented
			has_game_rule = {
				name = trigger_schism_rule
				value = no
			}
		}
		has_landed_title = k_pentarch_rome
		NOR = {
			war = yes
			is_heretic = yes
			trait = excommunicated
			is_inaccessible_trigger = yes
		}
		496 = { is_variable_equal = { which = "schism_tracker" value = 3 } }
		b_hagiasophia = {
			holder_scope = {
				war = no
				trait = greek_rites
				religion = ROOT
				NOT = { trait = excommunicated }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
	}

	major_trigger = {
		ai = no
		religion_group = christian
	}

	mean_time_to_happen = {
		years = 25
		modifier = {
			factor = 0.5
			year = 1025
		}
		modifier = {
			factor = 0.5
			year = 1050
		}
		modifier = {
			factor = 1.5
			religion_authority = 0.70
		}
		modifier = {
			factor = 1.5
			religion_authority = 0.80
		}
		modifier = {
			factor = 1.5
			religion_authority = 0.90
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.50
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.45
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.40
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.35
		}
		modifier = {
			factor = 0.75
			religion_authority < 0.30
		}
	}

	immediate = {
		log = "SCHISM LEAD-UP: CALL FOR ECUMENICAL COUNCIL REFUSED"
		set_global_flag = ecumenical_council_refused
		496 = { change_variable = { which = "schism_tracker" value = 1 } }
		b_hagiasophia = {
			holder_scope = { save_event_target_as = current_patriarch }
		}
	}

	option = {
		name = {
			text = EVTOPTA_Plus_2284
			trigger = {
				rightful_religious_head_scope = { trait = greek_rites }
			}
		}
		name = {
			text = EVTOPTB_Plus_2284
			trigger = {
				rightful_religious_head_scope = { trait = latin_rites }
			}
		}
		name = {
			text = EVTOPTC_Plus_2284
			trigger = {
				NOR = {
					rightful_religious_head_scope = { trait = greek_rites }
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
		}
	}
}















# Plus events moved here from lor_schism_events.txt

# Patriarchate of Constantinople
character_event = {
	id = LoR.220
	desc = EVTDESC_LoR_230
	picture = GFX_evt_bishop_byzantine
	border = GFX_event_normal_frame_religion

	only_independent = yes
	religion_group = christian
	has_dlc = "Legacy of Rome"

	trigger = {
		b_hagiasophia = {
			has_holder = yes

			holder_scope = {
				is_theocracy = yes
				religion = ROOT
				vassal_of = ROOT
			}
		}

		NOR = {
			religion = orthodox
			religion = chalcedonian
			has_global_flag = schism_mended
		}

		is_heretic = no

		primary_title = {
			NOT = { has_title_flag = pat_constantinople }
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		primary_title = {
			set_title_flag = pat_constantinople
		}
	}

	option = {
		name = EVTOPTALoR.200
		piety = 100
	}
}

### Latin Patriarchates

# Latin Patriarchate of Antioch
character_event = {
	id = LoR.221
	desc = EVTDESCLoR.200
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	only_independent = yes
	religion_group = christian
	has_dlc = "Legacy of Rome"

	trigger = {
		d_latin_antioch = {
			has_holder = yes

			holder_scope = {
				is_theocracy = yes
				religion = ROOT
				vassal_of = ROOT
			}
		}

		is_heretic = no

		primary_title = {
			NOT = { has_title_flag = pat_latin_antioch }
		}

		NOT = { has_global_flag = schism_mended }
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		primary_title = {
			set_title_flag = pat_latin_antioch
		}
	}

	option = {
		name = EVTOPTALoR.200

		piety = 100
	}
}

# Latin Patriarchate of Jerusalem
character_event = {
	id = LoR.222
	desc = EVTDESCLoR.201
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	only_independent = yes
	religion_group = christian
	has_dlc = "Legacy of Rome"

	trigger = {
		d_latin_jerusalem = {
			has_holder = yes

			holder_scope = {
				is_theocracy = yes
				religion = ROOT
				vassal_of = ROOT
			}
		}

		is_heretic = no
		NOT = { has_global_flag = schism_mended }

		primary_title = {
			NOT = { has_title_flag = pat_latin_jerusalem }
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		primary_title = {
			set_title_flag = pat_latin_jerusalem
		}
	}

	option = {
		name = EVTOPTALoR.200

		piety = 100
	}
}

# Latin Patriarchate of Alexandria
character_event = {
	id = LoR.223
	desc = EVTDESCLoR.202
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	only_independent = yes
	religion_group = christian
	has_dlc = "Legacy of Rome"

	trigger = {
		d_latin_alexandria = {
			has_holder = yes

			holder_scope = {
				is_theocracy = yes
				religion = ROOT
				vassal_of = ROOT
			}
		}

		is_heretic = no
		NOT = { has_global_flag = schism_mended }

		primary_title = {
			NOT = { has_title_flag = pat_latin_alexandria }
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		primary_title = {
			set_title_flag = pat_latin_alexandria
		}
	}

	option = {
		name = EVTOPTALoR.200

		piety = 100
	}
}

# Latin Patriarchate of Constantinople
character_event = {
	id = LoR.224
	desc = EVTDESC_LoR_230
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	only_independent = yes
	religion_group = christian
	has_dlc = "Legacy of Rome"

	trigger = {
		d_latin_constantinople = {
			has_holder = yes

			holder_scope = {
				is_theocracy = yes
				religion = ROOT
				vassal_of = ROOT
			}
		}

		is_heretic = no
		NOT = { has_global_flag = schism_mended }

		primary_title = {
			NOT = { has_title_flag = pat_latin_constantinople }
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		primary_title = {
			set_title_flag = pat_latin_constantinople
		}
	}

	option = {
		name = EVTOPTALoR.200

		piety = 100
	}
}